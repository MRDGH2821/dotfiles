{{- $python3 := include ".chezmoidata/packages/python3.yaml" | fromYaml -}}
{{- $windows := include ".chezmoidata/packages/windows.yaml" | fromYaml -}}
{{- $line := "Write-Output ('-' * (Get-Host).UI.RawUI.WindowSize.Width)" -}}

{{- /* Winget Packages */ -}}
{{- range $windows.winget -}}
  {{- println "echo \"Installing\"" . -}}
  {{- println "winget install -e --disable-interactivity --silent --accept-source-agreements --accept-package-agreements --id" (. | quote) -}}
  {{- println $line -}}
{{- end -}}
{{- println "$Env:Path = [System.Environment]::GetEnvironmentVariable(\"Path\",\"Machine\") + \";\" + [System.Environment]::GetEnvironmentVariable(\"Path\",\"User\")" -}}

{{- /* Python3 CLI tools */ -}}
{{- range $python.cli -}}
  {{- println "uv tool install" . -}}
  {{- println $line -}}
{{- end -}}

{{- /* Rust CLI tools */ -}}
{{- println "rustup default stable" -}}
{{- println "cargo install" (join " " $rust.install) -}}
{{- range $rust.git -}}
  {{- println "cargo install --git" . -}}
  {{- println $line -}}
{{- end -}}
{{- println "cargo binstall" (join " " $rust.binstall) -}}
{{- println $line -}}
