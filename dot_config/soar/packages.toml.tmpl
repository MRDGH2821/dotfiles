# Soar Declarative Package Configuration
# Run `soar apply` to install packages defined here.
# Run `soar apply --prune` to also remove packages not listed.
#
# Package format:
#   package_name = "*"                    # Latest version
#   package_name = "1.2.3"                # Specific version (pinned)
#   package_name = { version = "1.2" }    # Same as above
#   package_name = { pkg_id = "pkg-bin", repo = "bincache" }
#   package_name = { pinned = true, portable = { home = "~/.pkg" } }

{{ $distros := include ".chezmoidata/distros.yaml" | fromYaml }}
{{ $pkgs := include ".chezmoidata/packages/soar.toml" | fromToml }}

# Default settings applied to all packages unless overridden.
#
# Default settings for all packages.
[defaults]
# Default profile to use for installations.
profile = "default"
# Whether to install binary only (exclude logs, desktop files, etc).
binary_only = false

# Map of package names to their specifications.
# Supports both simple string form (version) and detailed table form.
[packages]
pcloud = {{ $pkgs.pcloud | toJson }}
rclone-browser = {{ $pkgs.rclone_browser | toJson }}
savestate = {{ $pkgs.savestate | toJson }}
use-via = {{ $pkgs.use_via | toJson }}

{{ if eq .devicetype "laptop" }}
pince = {{ $pkgs.pince | toJson }}
{{ end }}

{{ if and (hasKey .chezmoi.osRelease "versionCodename") (has .chezmoi.osRelease.versionCodename $distros.debian_codes) }}
cocogitto = {{ $pkgs.cocogitto | toJson }}
ludusavi = {{ $pkgs.ludusavi | toJson }}
mcfly = {{ $pkgs.mcfly | toJson }}
rclone = {{ $pkgs.rclone | toJson }}
tldr = {{ $pkgs.tldr | toJson }}
{{ end }}

{{ if and (hasKey .chezmoi.osRelease "id") (has .chezmoi.osRelease.id $distros.fedora) }}
cocogitto = {{ $pkgs.cocogitto | toJson }}
dra = {{ $pkgs.dra | toJson }}
ludusavi = {{ $pkgs.ludusavi | toJson }}
mcfly = {{ $pkgs.mcfly | toJson }}

{{ end }}
